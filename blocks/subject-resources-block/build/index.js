(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{5:function(e,t,c){}}]),function(e){function t(t){for(var r,o,a=t[0],l=t[1],i=t[2],b=0,p=[];b<a.length;b++)o=a[b],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);p.length;)p.shift()();return n.push.apply(n,i||[]),c()}function c(){for(var e,t=0;t<n.length;t++){for(var c=n[t],r=!0,a=1;a<c.length;a++){var l=c[a];0!==s[l]&&(r=!1)}r&&(n.splice(t--,1),e=o(o.s=c[0]))}return e}var r={},s={0:0},n=[];function o(t){if(r[t])return r[t].exports;var c=r[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,o),c.l=!0,c.exports}o.m=e,o.c=r,o.d=function(e,t,c){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(c,r,function(t){return e[t]}.bind(null,r));return c},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var i=0;i<a.length;i++)t(a[i]);var u=l;n.push([8,1]),c()}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t){!function(){e.exports=this.wp.blockEditor}()},,function(e,t){!function(){e.exports=this.wp.apiFetch}()},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var r=c(3),s=c(1),n=(c(5),c(0)),o=c(4),a=c(2);c(6),c(7);String.prototype.ucwords=function(){return this.toLowerCase().replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,(function(e){return e.toUpperCase()}))},Object(r.registerBlockType)("wp-oer-plugin/wp-oer-resources-block",{title:Object(s.__)("WP OER Subject Resources","wp-oer-resources-block"),description:Object(s.__)("This is a block that displays resources according to subject areas.","wp-oer-resources-block"),category:"widgets",icon:{foreground:"#121212",src:"welcome-widgets-menus"},keywords:[Object(s.__)("OER"),Object(s.__)("Resource"),Object(s.__)("Subject Areas")],attributes:{content:{type:"string",selector:"p"},title:{type:"string",selector:"h2"},link:{type:"string",selector:"a"},displayCount:{type:"string",selector:"display-count",default:5},selectedSubject:{type:"number",default:0},sort:{type:"string",selector:"sort-option",default:"modified"},selectedSubjectResources:{type:"array"},subjects:{type:"array"},selectedSubjects:{type:"array"},childSubjects:{type:"array"}},edit:function(e){var t,c,r=[],l=[],i=[],u=e.attributes,b=e.setAttributes,p=function(e){u.selectedSubjects;var t=u.displayCount,c=u.sort;void 0!==wp.api.collections&&(new wp.api.collections.Resource).fetch({data:{per_page:t,orderby:c,order:"asc"}}).then((function(e){b({selectedSubjectResources:e})}))};wp.apiFetch({url:oerapi.domain+"/wp-json/oer/v2/subjects"}).then((function(e){b({subjects:e})}));var d=[{value:"5",label:Object(s.__)("5")},{value:"10",label:Object(s.__)("10")},{value:"15",label:Object(s.__)("15")},{value:"20",label:Object(s.__)("20")},{value:"25",label:Object(s.__)("25")},{value:"30",label:Object(s.__)("30")}],m=[{value:"modified",label:Object(s.__)("Date Updated")},{value:"date",label:Object(s.__)("Date Added")},{value:"title",label:Object(s.__)("Title a-z")}];void 0===u.subjects?r=Object(s.__)("Loading..."):(r=[],i=u.subjects.sort((function(e,t){return e.label<t.label?-1:e.label>t.label?1:0})));var j=i.map((function(e,t){var c,r=!1;return void 0!==u.selectedSubjects&&(c=u.selectedSubjects,r=-1!==c.indexOf(e.term_id)),Object(n.createElement)(a.CheckboxControl,{value:e.term_id,label:e.name,key:t,name:"selectedSubjects[]",className:"child"==e.type?"oer-subject-area-child":"oer-subject-area-parent",checked:r,id:e.term_id,onChange:function(t){var c=u.selectedSubjects?u.selectedSubjects:[];t?(void 0!==c?-1===c.indexOf(e.term_id)&&c.push(e.term_id):c.push(e.term_id),r=!0):(c=u.selectedSubjects.filter((function(t){return t!==e.term_id})),r=!1),jQuery("#"+e.term_id).prop("checked",r),b({selectedSubjects:c})}})}));if(p(!1),void 0!==u.selectedSubjectResources){if(u.selectedSubjectResources.length>0){var f=m.map((function(e,t){return Object(n.createElement)("li",{key:e.value,value:e.value},e.label)}));void 0!==u.sort&&(c=u.sort.ucwords());var O="Browse "+u.displayCount+" resources";t=Object(n.createElement)("div",{className:"oer-snglrsrchdng"},O,Object(n.createElement)("div",{className:"sort-box"},Object(n.createElement)("span",{className:"sortoption"},c),Object(n.createElement)("span",{className:"sort-resources",title:"Sort resources",tabIndex:"0",role:"button"},Object(n.createElement)("i",{className:"fa fa-sort","aria-hidden":"true"})),Object(n.createElement)("div",{className:"sort-options"},Object(n.createElement)("ul",{className:"sortList"},f)),Object(n.createElement)(a.SelectControl,{className:"sort-selectbox",value:u.sort,options:m}))),u.selectedSubjectResources.length&&u.selectedSubjectResources.map((function(e,t){var c=[];void 0!==e.subject_details&&e.subject_details.map((function(t,r){var s=t.id.toString()+e.id.toString();c.push(Object(n.createElement)("span",{key:s},Object(n.createElement)("a",{href:t.link},t.name)))}),e),l.push(Object(n.createElement)("div",{key:e.id,className:"post oer-snglrsrc"},Object(n.createElement)("a",{href:e.link,className:"oer-resource-link"},Object(n.createElement)("div",{className:"oer-snglimglft"},Object(n.createElement)("img",{src:e.fimg_url}))),Object(n.createElement)("div",{className:"oer-snglttldscrght"},Object(n.createElement)("div",{className:"ttl"},Object(n.createElement)("a",{href:e.link},e.title.rendered)),Object(n.createElement)("div",{className:"post-meta"},Object(n.createElement)("span",{className:"post-meta-box post-meta-grades"},Object(n.createElement)("strong",null,"Grades: "),e.oer_grade),Object(n.createElement)("span",{className:"post-meta-box post-meta-domain"},Object(n.createElement)("strong",null,"Domain: "),Object(n.createElement)("a",{href:e.link},e.domain))),Object(n.createElement)("div",{className:"desc"},Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:e.resource_excerpt}})),Object(n.createElement)("div",{className:"tagcloud"},c))))}),l)}r=l}return Object(n.createElement)("div",null,Object(n.createElement)(o.InspectorControls,{className:"oer-subject-resources-block-inspector"},Object(n.createElement)(a.PanelBody,{title:"OER Subject Resources Option",initialOpen:!0},Object(n.createElement)(a.PanelRow,null,Object(n.createElement)("div",{className:"form-group oer-inspector-subjects"},Object(n.createElement)("label",null,"Subject(s);"),Object(n.createElement)("div",{className:"editor-post-taxonomies__hierarchical-terms-list"},j))),Object(n.createElement)(a.PanelRow,null,Object(n.createElement)(a.SelectControl,{className:"display-count",label:Object(s.__)("# of Resources to display:"),value:u.displayCount,options:d,onChange:function(e){b({displayCount:e}),p(!0)}})),Object(n.createElement)(a.PanelRow,null,Object(n.createElement)(a.SelectControl,{className:"sort-option",label:Object(s.__)("Sort:"),value:u.sort,options:m,onChange:function(e){b({sort:e}),p(!0)}})))),Object(n.createElement)("div",{className:"oer-subject-resources-list"},t,r))}})}]);