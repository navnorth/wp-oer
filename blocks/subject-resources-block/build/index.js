(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{5:function(e,t,r){}}]),function(e){function t(t){for(var c,s,o=t[0],l=t[1],i=t[2],b=0,p=[];b<o.length;b++)s=o[b],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(c in l)Object.prototype.hasOwnProperty.call(l,c)&&(e[c]=l[c]);for(u&&u(t);p.length;)p.shift()();return a.push.apply(a,i||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],c=!0,o=1;o<r.length;o++){var l=r[o];0!==n[l]&&(c=!1)}c&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var c={},n={0:0},a=[];function s(t){if(c[t])return c[t].exports;var r=c[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=c,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)s.d(r,c,function(t){return e[t]}.bind(null,c));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var i=0;i<o.length;i++)t(o[i]);var u=l;a.push([8,1]),r()}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t){!function(){e.exports=this.wp.blockEditor}()},,function(e,t){!function(){e.exports=this.wp.apiFetch}()},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var c=r(3),n=r(1),a=(r(5),r(0)),s=r(4),o=r(2);r(6),r(7);String.prototype.ucwords=function(){return this.toLowerCase().replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g,(function(e){return e.toUpperCase()}))},Object(c.registerBlockType)("wp-oer-plugin/wp-oer-resources-block",{title:Object(n.__)("WP OER Subject Resources","wp-oer-resources-block"),description:Object(n.__)("This is a block that displays resources according to subject areas.","wp-oer-resources-block"),category:"widgets",icon:{foreground:"#121212",src:"welcome-widgets-menus"},keywords:[Object(n.__)("OER"),Object(n.__)("Resource"),Object(n.__)("Subject Areas")],attributes:{content:{type:"string",selector:"p"},title:{type:"string",selector:"h2"},link:{type:"string",selector:"a"},displayCount:{type:"string",selector:"display-count",default:5},selectedSubject:{type:"number",default:0},sort:{type:"string",selector:"sort-option",default:"modified"},selectedSubjectResources:{type:"array"},subjects:{type:"array"},selectedSubjects:{type:"array"},childSubjects:{type:"array"},changeDisplay:{type:"boolean",default:!1},initialLoad:{type:"boolean",default:!0}},edit:function(e){var t,r,c=[],l=[],i=[],u=e.attributes,b=e.setAttributes;1==u.initialLoad&&(wp.apiFetch({url:oerapi.domain+"/wp-json/oer/v2/subjects"}).then((function(e){b({subjects:e})})),b({initialLoad:!1}));var p=[{value:"5",label:Object(n.__)("5")},{value:"10",label:Object(n.__)("10")},{value:"15",label:Object(n.__)("15")},{value:"20",label:Object(n.__)("20")},{value:"25",label:Object(n.__)("25")},{value:"30",label:Object(n.__)("30")}],d=[{value:"modified",label:Object(n.__)("Date Updated")},{value:"date",label:Object(n.__)("Date Added")},{value:"title",label:Object(n.__)("Title A-Z")}];void 0===u.subjects?c=Object(n.__)("Loading..."):(c=[],i=u.subjects.sort((function(e,t){return e.label<t.label?-1:e.label>t.label?1:0})));var m=i.map((function(e,t){var r,c=!1;return void 0!==u.selectedSubjects&&(r=u.selectedSubjects,c=-1!==r.indexOf(e.term_id)),Object(a.createElement)(o.CheckboxControl,{value:e.term_id,label:e.name,key:t,name:"selectedSubjects[]",className:"child"==e.type?"oer-subject-area-child":"oer-subject-area-parent",checked:c,id:e.term_id,onChange:function(t){var r=u.selectedSubjects?u.selectedSubjects:[];t?(void 0!==r?-1===r.indexOf(e.term_id)&&r.push(e.term_id):r.push(e.term_id),c=!0):(r=u.selectedSubjects.filter((function(t){return t!==e.term_id})),c=!1),jQuery("#"+e.term_id).prop("checked",c),b({selectedSubjects:r,changeDisplay:!0})}})}));if(1==u.changeDisplay&&(setTimeout((function(){!function(e){var t=u.selectedSubjects,r=u.displayCount,c=u.sort,n=u.selectedSubjectResources,a=oerapi.domain+"/wp-json/oer/v2/resources?subjects="+t+"&sort="+c+"&count="+r;wp.apiFetch({url:a}).then((function(e){(function(e,t){if(void 0===e||void 0===t)return!1;if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0})(n,e)||b({selectedSubjectResources:e})}))}()}),3e3),b({changeDisplay:!1})),void 0!==u.selectedSubjectResources&&u.selectedSubjectResources.length>0){var j=d.map((function(e,t){return Object(a.createElement)("li",{key:e.value,value:e.value},e.label)}));void 0!==u.sort&&(r=d.map((function(e,t){if(e.value==u.sort)return e.label})));var f="Browse "+u.displayCount+" resources";t=Object(a.createElement)("div",{className:"oer-snglrsrchdng","data-sort":u.sort,"data-count":u.displayCount,"data-subjects":u.selectedSubjects},f,Object(a.createElement)("div",{className:"sort-box"},Object(a.createElement)("span",{className:"sortoption-label"},"Sorted by"),": ",Object(a.createElement)("span",{className:"sortoption"},r),Object(a.createElement)("span",{className:"sort-resources",title:"Sort resources",tabIndex:"0",role:"button"},Object(a.createElement)("i",{className:"fa fa-sort","aria-hidden":"true"})),Object(a.createElement)("div",{className:"sort-options"},Object(a.createElement)("ul",{className:"sortList"},j)),Object(a.createElement)(o.SelectControl,{className:"sort-selectbox",value:u.sort,options:d}))),u.selectedSubjectResources.map((function(e,t){var r=[];void 0!==e.subject_details&&e.subject_details.map((function(t,c){var n=t.id.toString()+e.ID.toString();r.push(Object(a.createElement)("span",{key:n},Object(a.createElement)("a",{href:t.link},t.name)))}),e),l.push(Object(a.createElement)("div",{key:e.ID,className:"post oer-snglrsrc"},Object(a.createElement)("a",{href:e.link,className:"oer-resource-link"},Object(a.createElement)("div",{className:"oer-snglimglft"},Object(a.createElement)("img",{src:e.fimg_url}))),Object(a.createElement)("div",{className:"oer-snglttldscrght"},Object(a.createElement)("div",{className:"ttl"},Object(a.createElement)("a",{href:e.link},e.post_title)),Object(a.createElement)("div",{className:"post-meta"},Object(a.createElement)("span",{className:"post-meta-box post-meta-grades"},Object(a.createElement)("strong",null,"Grades: "),e.oer_grade),Object(a.createElement)("span",{className:"post-meta-box post-meta-domain"},Object(a.createElement)("strong",null,"Domain: "),Object(a.createElement)("a",{href:e.link},e.domain))),Object(a.createElement)("div",{className:"desc"},Object(a.createElement)("div",{dangerouslySetInnerHTML:{__html:e.resource_excerpt}})),Object(a.createElement)("div",{className:"tagcloud"},r))))}),l),c=l}return Object(a.createElement)("div",null,Object(a.createElement)(s.InspectorControls,{className:"oer-subject-resources-block-inspector"},Object(a.createElement)(o.PanelBody,{title:"OER Subject Resources Option",initialOpen:!0},Object(a.createElement)(o.PanelRow,null,Object(a.createElement)("div",{className:"form-group oer-inspector-subjects"},Object(a.createElement)("label",null,"Subject(s);"),Object(a.createElement)("div",{className:"editor-post-taxonomies__hierarchical-terms-list"},m))),Object(a.createElement)(o.PanelRow,null,Object(a.createElement)(o.SelectControl,{className:"display-count",label:Object(n.__)("# of Resources to display:"),value:u.displayCount,options:p,onChange:function(e){b({displayCount:e,changeDisplay:!0})}})),Object(a.createElement)(o.PanelRow,null,Object(a.createElement)(o.SelectControl,{className:"sort-option",label:Object(n.__)("Sort:"),value:u.sort,options:d,onChange:function(e){b({sort:e,changeDisplay:!0})}})))),Object(a.createElement)("div",{className:"oer-subject-resources-list"},t,c))}})}]);